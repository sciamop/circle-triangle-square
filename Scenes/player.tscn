[gd_scene load_steps=18 format=3 uid="uid://bmlknwmevbp4p"]

[ext_resource type="Script" uid="uid://dbvwt6nipxqyt" path="res://Scripts/player.gd" id="1_0rj3f"]
[ext_resource type="Script" uid="uid://y63jp0cst87s" path="res://Scenes/polygon_2d.gd" id="2_256ay"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_5w4a4"]
height = 68.0

[sub_resource type="SkeletonModification2DTwoBoneIK" id="SkeletonModification2DTwoBoneIK_uubcb"]
target_nodepath = NodePath("../IKTargetLeg01")
joint_one_bone_idx = 6
joint_one_bone2d_node = NodePath("HipBone/Leg01Bone")
joint_two_bone_idx = 6
joint_two_bone2d_node = NodePath("HipBone/Leg01Bone")

[sub_resource type="SkeletonModification2DTwoBoneIK" id="SkeletonModification2DTwoBoneIK_v6nfe"]
target_nodepath = NodePath("../IKTargetLeg02")
joint_one_bone_idx = 7
joint_one_bone2d_node = NodePath("HipBone/Leg02Bone")
joint_two_bone_idx = 7
joint_two_bone2d_node = NodePath("HipBone/Leg02Bone")

[sub_resource type="SkeletonModification2DTwoBoneIK" id="SkeletonModification2DTwoBoneIK_mlksc"]
target_nodepath = NodePath("../IKTargetBody")
joint_one_bone_idx = 1
joint_one_bone2d_node = NodePath("HipBone/BodyBone")
joint_two_bone_idx = 1
joint_two_bone2d_node = NodePath("HipBone/BodyBone")

[sub_resource type="SkeletonModification2DTwoBoneIK" id="SkeletonModification2DTwoBoneIK_akpe4"]
target_nodepath = NodePath("../IKTargetHat")
flip_bend_direction = true
joint_one_bone_idx = 3
joint_one_bone2d_node = NodePath("HipBone/BodyBone/HeadBone/HatBone")
joint_two_bone_idx = 2
joint_two_bone2d_node = NodePath("HipBone/BodyBone/HeadBone")

[sub_resource type="SkeletonModification2DTwoBoneIK" id="SkeletonModification2DTwoBoneIK_cvnsp"]
target_nodepath = NodePath("../IKTargetArm")
joint_one_bone_idx = 5
joint_one_bone2d_node = NodePath("HipBone/BodyBone/HeadBone/upperArmBone/lowerArmBone")
joint_two_bone_idx = 4
joint_two_bone2d_node = NodePath("HipBone/BodyBone/HeadBone/upperArmBone")

[sub_resource type="SkeletonModificationStack2D" id="SkeletonModificationStack2D_7uh1y"]
enabled = true
modification_count = 5
modifications/0 = SubResource("SkeletonModification2DTwoBoneIK_uubcb")
modifications/1 = SubResource("SkeletonModification2DTwoBoneIK_v6nfe")
modifications/2 = SubResource("SkeletonModification2DTwoBoneIK_mlksc")
modifications/3 = SubResource("SkeletonModification2DTwoBoneIK_akpe4")
modifications/4 = SubResource("SkeletonModification2DTwoBoneIK_cvnsp")

[sub_resource type="Animation" id="Animation_te0kc"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("IKTargetHat:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(34, -102)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("IKTargetBody:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(-79, -583)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("IKTargetLeg01:position")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(2, 186)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("IKTargetLeg02:position")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(13, 148)]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("CollisionShape2D:position")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, 68)]
}

[sub_resource type="Animation" id="Animation_1sckd"]
resource_name = "idle"
length = 3.0
step = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("IKTargetBody:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1.5, 3),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(-79, -583), Vector2(57, -569), Vector2(-79, -583)]
}

[sub_resource type="Animation" id="Animation_ktgti"]
resource_name = "walkLeft"
length = 0.25
loop_mode = 1
step = 0.125
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("IKTargetHat:position")
tracks/0/interp = 1
tracks/0/loop_wrap = false
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.125, 0.25),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(34, -36), Vector2(95, -131), Vector2(34, -36)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("IKTargetBody:position")
tracks/1/interp = 1
tracks/1/loop_wrap = false
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.125, 0.25),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(-79, -583), Vector2(-196, -587), Vector2(-79, -583)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("IKTargetLeg01:position")
tracks/2/interp = 1
tracks/2/loop_wrap = false
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.125, 0.25),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(2, 186), Vector2(55, 179), Vector2(2, 186)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("IKTargetLeg02:position")
tracks/3/interp = 1
tracks/3/loop_wrap = false
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.125, 0.25),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(13, 148), Vector2(-13, 150), Vector2(13, 148)]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("CollisionShape2D:position")
tracks/4/interp = 1
tracks/4/loop_wrap = false
tracks/4/keys = {
"times": PackedFloat32Array(0, 0.125, 0.25),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(0, 68), Vector2(2, 65), Vector2(0, 68)]
}

[sub_resource type="Animation" id="Animation_ncdb6"]
resource_name = "walkRight"
length = 0.25
loop_mode = 1
step = 0.125
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("IKTargetHat:position")
tracks/0/interp = 1
tracks/0/loop_wrap = false
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.125, 0.25),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(-56, -101), Vector2(-73, -86), Vector2(-56, -101)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("IKTargetBody:position")
tracks/1/interp = 1
tracks/1/loop_wrap = false
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.125, 0.25),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(12, -584), Vector2(63, -557), Vector2(12, -584)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("IKTargetLeg01:position")
tracks/2/interp = 1
tracks/2/loop_wrap = false
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.125, 0.25),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(2, 186), Vector2(55, 179), Vector2(2, 186)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("IKTargetLeg02:position")
tracks/3/interp = 1
tracks/3/loop_wrap = false
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.125, 0.25),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(13, 148), Vector2(-13, 150), Vector2(13, 148)]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("CollisionShape2D:position")
tracks/4/interp = 1
tracks/4/loop_wrap = false
tracks/4/keys = {
"times": PackedFloat32Array(0, 0.125, 0.25),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(0, 68), Vector2(2, 65), Vector2(0, 68)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_nq0pq"]
_data = {
&"RESET": SubResource("Animation_te0kc"),
&"idle": SubResource("Animation_1sckd"),
&"walkLeft": SubResource("Animation_ktgti"),
&"walkRight": SubResource("Animation_ncdb6")
}

[sub_resource type="Curve" id="Curve_8ablf"]
_data = [Vector2(0.148148, 0.0263312), 0.0, 0.0, 0, 0, Vector2(0.959742, 0.893505), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_5kwmq"]
curve = SubResource("Curve_8ablf")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_dyy5f"]
lifetime_randomness = 0.06
particle_flag_disable_z = true
emission_shape = 3
emission_box_extents = Vector3(1, 1, 1)
angle_min = 89.4
angle_max = 89.4
inherit_velocity_ratio = 0.18
velocity_pivot = Vector3(0, 0, 1.405)
direction = Vector3(1, -0.085, 1.17)
spread = 7.733
flatness = 0.346
initial_velocity_min = 153.6
initial_velocity_max = 542.49
gravity = Vector3(0, 98, 0)
scale_min = 1.5
scale_max = 2.0
color = Color(0, 0, 0, 1)
emission_curve = SubResource("CurveTexture_5kwmq")

[node name="Player" type="CharacterBody2D"]
collision_layer = 3
collision_mask = 3
script = ExtResource("1_0rj3f")

[node name="IKTargetLeg01" type="Node2D" parent="."]
position = Vector2(2, 186)

[node name="IKTargetLeg02" type="Node2D" parent="."]
position = Vector2(13, 148)

[node name="IKTargetBody" type="Node2D" parent="."]
position = Vector2(-79, -583)

[node name="IKTargetHead" type="Node2D" parent="."]
position = Vector2(-6, -47)

[node name="IKTargetHat" type="Node2D" parent="."]
position = Vector2(34, -102)
rotation = 0.677188

[node name="IKTargetArm" type="Node2D" parent="."]
position = Vector2(-15, 152)
rotation = 3.14159
scale = Vector2(0.999958, 0.999958)

[node name="HatPolygon" type="Polygon2D" parent="."]
z_index = 1
position = Vector2(-0.224592, 32.3202)
rotation = -1.04433
scale = Vector2(0.999937, 0.999937)
color = Color(0, 0, 0, 1)
offset = Vector2(-2.57, 2.54)
texture_scale = Vector2(61.65, 61.65)
polygon = PackedVector2Array(2.57, 7.46, 65.57, -2.53999, 1.57, -11.54)
vertex_colors = PackedColorArray(0, 0, 0, 1)

[node name="HeadPolygon" type="Polygon2D" parent="."]
position = Vector2(-3.33507, 38.5879)
rotation = -1.1211
scale = Vector2(0.99995, 0.99995)
color = Color(0, 0, 0, 1)
polygon = PackedVector2Array(12, 0, 10.3923, 6, 6, 10.3923, 7.34788e-16, 12, -6, 10.3923, -10.3923, 6, -12, 1.46958e-15, -10.3923, -6, -6, -10.3923, -2.20436e-15, -12, 6, -10.3923, 10.3923, -6)
script = ExtResource("2_256ay")
radius = 12.0
segments = 12

[node name="BodyPolygon" type="Polygon2D" parent="."]
z_index = 1
position = Vector2(3, 80)
rotation = -1.8523
scale = Vector2(0.999982, 0.999982)
color = Color(0, 0, 0, 1)
offset = Vector2(-1.235, 4.365)
texture_scale = Vector2(61.65, 61.65)
polygon = PackedVector2Array(43.235, -4.365, 0.235, -22.365, 1.235, -4.365, 0.235, 13.635)
vertex_colors = PackedColorArray(0, 0, 0, 1)

[node name="Leg02Polygon" type="Polygon2D" parent="."]
z_index = 1
position = Vector2(11, 80)
rotation = 1.88388
scale = Vector2(0.99993, 0.99993)
color = Color(0, 0, 0, 1)
texture_scale = Vector2(61.65, 61.65)
skeleton = NodePath("../Leg01Polygon")
polygon = PackedVector2Array(22, -9.53674e-07, -9.7498, -1.72055, -3.6869, 8.6847)
vertex_colors = PackedColorArray(0, 0, 0, 1)

[node name="ArmPolygon" type="Polygon2D" parent="."]
z_index = 1
position = Vector2(-5.1796, 55.0633)
rotation = 3.04253
scale = Vector2(0.999927, 0.999927)
color = Color(0, 0, 0, 1)
texture_scale = Vector2(61.65, 61.65)
skeleton = NodePath("../Leg01Polygon")
polygon = PackedVector2Array(-16.7744, -24.2897, 5.58743, -6.18159, -2.49675, 3.18182)
vertex_colors = PackedColorArray(0, 0, 0, 1)

[node name="Leg01Polygon" type="Polygon2D" parent="."]
z_index = 1
position = Vector2(-3.12957, 79.5077)
rotation = 1.05607
scale = Vector2(0.999994, 0.999994)
color = Color(0, 0, 0, 1)
offset = Vector2(-0.335, 14.865)
texture_scale = Vector2(61.65, 61.65)
polygon = PackedVector2Array(22.335, -13.865, -4.3139, -19.8975, -4.72897, -9.46516)
vertex_colors = PackedColorArray(0, 0, 0, 1)

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, 68)
shape = SubResource("CapsuleShape2D_5w4a4")

[node name="Skeleton2D" type="Skeleton2D" parent="."]
position = Vector2(3, -7)
modification_stack = SubResource("SkeletonModificationStack2D_7uh1y")

[node name="HipBone" type="Bone2D" parent="Skeleton2D"]
position = Vector2(0, 88)
rotation = 1.5708
rest = Transform2D(-3.61999e-06, 1, -1, -3.61999e-06, 0, 88)
auto_calculate_length_and_angle = false
length = 36.697
bone_angle = 0.0

[node name="BodyBone" type="Bone2D" parent="Skeleton2D/HipBone"]
position = Vector2(-0.999998, 4.9664e-08)
rotation = 3.14159
rest = Transform2D(-0.97529, 0.220865, -0.220865, -0.97529, -0.999998, 4.9664e-08)
auto_calculate_length_and_angle = false
length = 39.653
bone_angle = 0.0
metadata/_local_pose_override_enabled_ = true

[node name="HeadBone" type="Bone2D" parent="Skeleton2D/HipBone/BodyBone"]
position = Vector2(37, 1.43051e-06)
rest = Transform2D(0.795595, 0.605792, -0.605792, 0.795595, 37, 1.43051e-06)
metadata/_local_pose_override_enabled_ = true

[node name="HatBone" type="Bone2D" parent="Skeleton2D/HipBone/BodyBone/HeadBone"]
position = Vector2(13, 1)
rest = Transform2D(0.997044, 0.0766957, -0.0766957, 0.997044, 13, 1)
auto_calculate_length_and_angle = false
length = 60.35
bone_angle = 0.0
metadata/_local_pose_override_enabled_ = true

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="Skeleton2D/HipBone/BodyBone/HeadBone/HatBone"]
position = Vector2(1, 3.32594e-06)
remote_path = NodePath("../../../../../../HatPolygon")

[node name="upperArmBone" type="Bone2D" parent="Skeleton2D/HipBone/BodyBone/HeadBone"]
position = Vector2(-10.8478, 4.4697)
rotation = -1.12927
scale = Vector2(0.999989, 0.999989)
rest = Transform2D(0.471507, -0.881853, 0.881853, 0.471507, -10.094, 6.99322)
auto_calculate_length_and_angle = false
length = 78.075
bone_angle = 0.0
metadata/_local_pose_override_enabled_ = true

[node name="lowerArmBone" type="Bone2D" parent="Skeleton2D/HipBone/BodyBone/HeadBone/upperArmBone"]
rotation = -0.188564
scale = Vector2(0.999998, 0.999998)
rest = Transform2D(0.583433, -0.812154, 0.812154, 0.583433, 0, 0)
auto_calculate_length_and_angle = false
length = 34.685
bone_angle = -129.488
metadata/_local_pose_override_enabled_ = true

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="Skeleton2D/HipBone/BodyBone/HeadBone/upperArmBone/lowerArmBone"]
position = Vector2(-2.88469, 0.824198)
remote_path = NodePath("../../../../../../../ArmPolygon")

[node name="HeadRemote" type="RemoteTransform2D" parent="Skeleton2D/HipBone/BodyBone/HeadBone"]
position = Vector2(7, 1)
remote_path = NodePath("../../../../../HeadPolygon")

[node name="BodyRemote" type="RemoteTransform2D" parent="Skeleton2D/HipBone/BodyBone"]
position = Vector2(0, 5.95264e-09)
remote_path = NodePath("../../../../BodyPolygon")

[node name="Leg01Bone" type="Bone2D" parent="Skeleton2D/HipBone"]
position = Vector2(-1, 7)
rest = Transform2D(0.939623, -0.342209, 0.342209, 0.939623, -1, 7)
auto_calculate_length_and_angle = false
length = 21.913
bone_angle = 0.0
metadata/_local_pose_override_enabled_ = true

[node name="Leg01Remote" type="RemoteTransform2D" parent="Skeleton2D/HipBone/Leg01Bone"]
position = Vector2(-4.37114e-08, -1)
remote_path = NodePath("../../../../Leg01Polygon")

[node name="Leg02Bone" type="Bone2D" parent="Skeleton2D/HipBone"]
position = Vector2(-1, -8)
rest = Transform2D(0.982116, 0.188268, -0.188268, 0.982116, -1, -8)
auto_calculate_length_and_angle = false
length = 21.913
bone_angle = 0.0
metadata/_local_pose_override_enabled_ = true

[node name="Leg02Remote" type="RemoteTransform2D" parent="Skeleton2D/HipBone/Leg02Bone"]
remote_path = NodePath("../../../../Leg02Polygon")

[node name="PlayerAnimPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_nq0pq")
}
autoplay = "idle"
next/idle = &"RESET"
next/walkRight = &"idle"
blend_times = [&"walkRight", &"idle", 0.013, &"walkRight", &"walkLeft", 0.013, &"walkRight", &"walkRight", 0.013]

[node name="DashParticles" type="GPUParticles2D" parent="."]
position = Vector2(13, 101)
emitting = false
amount = 64
process_material = SubResource("ParticleProcessMaterial_dyy5f")
